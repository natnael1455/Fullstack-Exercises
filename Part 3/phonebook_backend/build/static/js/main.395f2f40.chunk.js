(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{37:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(2),r=t(14),a=t.n(r),u=t(3),i=function(e){var n=e.addName,t=e.newName,c=e.handleNameChange,r=e.newNumber,a=e.handleNumberChange;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Add a New "}),Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:[" name: ",Object(o.jsx)("input",{value:t,onChange:c})]}),Object(o.jsxs)("div",{children:[" number: ",Object(o.jsx)("input",{value:r,onChange:a})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})]})},s=t(4),l=t.n(s),d="https://desolate-peak-40401.herokuapp.com/api/persons",h=function(){return l.a.get(d).then((function(e){return e.data}))},j=function(e){return l.a.post(d,e).then((function(e){return e.data}))},b=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data})).catch((function(e){alert("not deleted")}))},m=function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){var n=e.personToShow;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)("table",{children:Object(o.jsx)("tbody",{children:n.map((function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e.name}),Object(o.jsx)("td",{children:e.number}),Object(o.jsx)("td",{children:Object(o.jsx)("button",{onClick:function(){return function(e){window.confirm("do you want to delete ".concat(e.name))&&b(e.id).then((function(e){console.log(e)}))}(e)},children:"Delete"})})]},e.name)}))})})]})},f=function(e){var n=e.showAll,t=e.handleShowChange;return Object(o.jsxs)("div",{children:["filter shown with ",Object(o.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.message,t={color:n.color,background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return null===n.msg?null:Object(o.jsx)("div",{className:"error",style:t,children:n.msg})},p=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)("enter the name"),s=Object(u.a)(a,2),l=s[0],d=s[1],b=Object(c.useState)("000"),p=Object(u.a)(b,2),x=p[0],v=p[1],w=Object(c.useState)(""),N=Object(u.a)(w,2),C=N[0],S=N[1],k=Object(c.useState)({msg:null,color:"green"}),y=Object(u.a)(k,2),T=y[0],A=y[1];Object(c.useEffect)((function(){h().then((function(e){r(e)}))}),[]);var L=""===C?t:t.filter((function(e){return e.name.toLowerCase().includes(C.toLocaleLowerCase())}));return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(O,{message:T}),Object(o.jsx)(f,{showAll:C,handleShowChange:function(e){console.log(e.target.value),S(e.target.value)}}),Object(o.jsx)(i,{addName:function(e){e.preventDefault();var n=t.find((function(e){return e.name===l}));n?window.confirm("the name ".concat(l," exists do you want change"))&&(n.number=x,m(n.id,n).then((function(e){var n={msg:" the number for ".concat(l," is changed to ").concat(x," in the phone book"),color:"green"};A(n),setTimeout((function(){A({msg:null,color:"green"})}),5e3),r(t.map((function(n){return n.id!==e.id?n:e})))})).catch((function(e){var n=e.response.data.error;A({msg:n,color:"red"}),setTimeout((function(){A({msg:null,color:"green"})}),5e3)}))):j({name:l,number:x}).then((function(e){r(t.concat(e));var n={msg:"".concat(l," is added to the phone book"),color:"green"};A(n),setTimeout((function(){A({msg:null,color:"green"})}),5e3)})).catch((function(e){var n=e.response.data.error;A({msg:n,color:"red"}),setTimeout((function(){A({msg:null,color:"green"})}),5e3)}))},newName:l,handleNameChange:function(e){console.log(e.target.value),d(e.target.value)},newNumber:x,handleNumberChange:function(e){console.log(e.target.value),v(e.target.value)}}),Object(o.jsx)(g,{personToShow:L})]})};a.a.render(Object(o.jsx)(p,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.395f2f40.chunk.js.map